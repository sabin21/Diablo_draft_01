<!DOCTYPE html>
<html lang="ko">
	<head>
		<title>Diablo Immortal</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link  rel="stylesheet" href="../scss/type_a2.css">
		<style>
            
        </style>
	</head>

	<body>
		<section class="hero-wrap" id="container"></section>
		<div class="hero-box">
			<header class="header">
				<div class="header-right">
					<img src="../img/a_header_right.png">
				</div>
			</header>
			<div class="logo-big">
				<img src="../img/logo_big_simple.png">
			</div>
			<div class="visual-1"> <img src="../img/a_hero_1.png"> </div>
			<div class="visual-3"> <img src="../img/a_hero_3.png"> </div>
			<div class="visual-2"> <img src="../img/a_hero_2.png"> </div>
		</div>

		<section class="section-2">
			<span class="headline"></span>
		</section>

		<section class="section-3">
			
			<article class="card-wrap card-1">
				<div class="pict-wrap">
					<video loop muted autoplay crossOrigin="anonymous">
						<source src="../video/play_preview.mp4" type='video/mp4;'>
					</video>
				</div>
				<div class="card-body">
					<h3>잠들었던 손맛을 일깨우는<br>짜릿한 전투와 액션</h3>
					<p>
						무지성 자동사냥 전투를 언제까지 반복 하실 건가요?<br>
						디아블로 본연의 손맛이 느껴지는 전투 액션을 모바일로 느껴보세요
					</p>
				</div>
			</article>

			<article class="card-wrap card-2">
				<div class="pict-wrap">
					<video loop muted autoplay crossOrigin="anonymous">
						<source src="../video/play_preview.mp4" type='video/mp4;'>
					</video>
				</div>
				<div class="card-body">
					<h3>No more, Pay to Win</h3>
					<p>
						강해지기 위해 무리한 과금을 반복해야만 하나요?<br>
						디아블로의 합리적인 게임 서비스로 게임 본연의 재미를 찾으세요.
					</p>
				</div>
			</article>

			<article class="card-wrap card-3">
				<div class="pict-wrap">
					<video loop muted autoplay crossOrigin="anonymous">
						<source src="../video/play_preview.mp4" type='video/mp4;'>
					</video>
				</div>
				<div class="card-body">
					<h3>다양하고 끝이 없는 즐거움</h3>
					<p>
						액트 플레이, 파티 플레이, 8인 레이드, PVP 전장, 균열 등<br>
						다양한 콘텐츠와 다양한 전투 플레이로 끝임없는 다양한 즐거움을 느껴보세요 
					</p>
				</div>
			</article>

			<article class="card-wrap card-4">
				<div class="pict-wrap">
					<video loop muted autoplay crossOrigin="anonymous">
						<source src="../video/play_preview.mp4" type='video/mp4;'>
					</video>
				</div>
				<div class="card-body">
					<h3>사용자 편의성 UI, 컨트롤러 지원</h3>
					<p>
						전투중 자동 저장 등, 다양한 편의성 UI 설계로 게임플레이의 불편함을 제거하고 
						컨트롤러 지원으로 콘솔게임의 재미까지 더했습니다.
					</p>
				</div>
			</article>

		</section>

		<section class="section-4">

			<img src="../img/b_con_1.png">
		</section>
		
		
		<span class="scroll-element">
			<span class="trigger trigger-1"></span>
			<span class="trigger trigger-2"></span>
			<span class="trigger trigger-3"></span>
		</span>
		<video id="video" loop muted autoplay crossOrigin="anonymous" style="display:none;">
			<source src="../video/play_preview.mp4" type='video/mp4;'>
		</video>



<script src="../js/gsap.min.js"></script>
<script src="../js/ScrollTrigger.min.js"></script>


<script type="module">
	import * as THREE from '../build/three.module.js';

    import { RoundedBoxGeometry } from './jsm/geometries/RoundedBoxGeometry.js';
    import { GLTFLoader } from './jsm/loaders/GLTFLoader.js';
    import { RGBELoader } from './jsm/loaders/RGBELoader.js';
    import { RoughnessMipmapper } from './jsm/utils/RoughnessMipmapper.js';
    import { EffectComposer } from './jsm/postprocessing/EffectComposer.js';
    import { RenderPass } from './jsm/postprocessing/RenderPass.js';
    import { ShaderPass } from './jsm/postprocessing/ShaderPass.js';
    import { UnrealBloomPass } from './jsm/postprocessing/UnrealBloomPass.js';

    let container;
	let camera, scene, renderer, light, light2, clock;
	let uniforms, diablo1, fire, diabloRig, fireObject, diabloTexture1;
	let video, videoTexture, videoMat, phoneBodyMat;

	init();
//-----------------

function init() {
  	container = document.getElementById( 'container' );

  	const aspect = container.clientWidth/container.clientHeight;
  	camera = new THREE.PerspectiveCamera(35, aspect, 0.01, 1000);
  	camera.position.z = 5;

  	scene = new THREE.Scene();
	light = new THREE.PointLight( 0xffffff, 1.5, 1000 );
	light.position.set(0 ,0 ,0);
	light2 = new THREE.PointLight( 0xffffff, 2, 1000 );

	light.position.set(2, 4, 4);
	//scene.add(light);
	scene.add(light2);
	light2.position.set(2 ,8 ,10);
	scene.add(camera);

	//
    let iconRig = new THREE.Object3D();
    const loader = new GLTFLoader();

    loader.load( 'models/logo_icon.glb', function ( gltf ) {
        const iconScene = gltf.scene;
        iconRig.add(iconScene);
    });
    
    scene.add(iconRig);
	
	let phoneRig = new THREE.Object3D();
	const loaderPhone = new GLTFLoader();
	const loaderPhoneScreen = new GLTFLoader(); 
	let phoneBodyMesh = null;
	let phoneScreenMesh = null;
	let phoneBodyGeo = null;

	loaderPhone.load ('models/phone_body.glb', (gltf) => {
		const stoneMesh = gltf.scene.children.find((mesh) => mesh.name === "phone_base");
		phoneBodyGeo = stoneMesh.geometry.clone();

		phoneBodyMat = new THREE.MeshBasicMaterial({
			color : 0x363636,
			transparent: true
		});
		phoneBodyMat.opacity = 1;
		phoneBodyMesh = new THREE.Mesh(phoneBodyGeo, phoneBodyMat);				
		phoneRig.add(phoneBodyMesh);
    });
	
	loaderPhoneScreen.load ('models/phone_screen.glb', (gltf) => {
		const stoneMesh = gltf.scene.children.find((mesh) => mesh.name === "phone_screen");
		const phoneScreenGeometry = stoneMesh.geometry.clone();

		phoneScreenMesh = new THREE.Mesh(phoneScreenGeometry, videoMat);				
		phoneRig.add(phoneScreenMesh);
    });
	phoneRig.position.set(0, 0, -18 );
	phoneRig.rotation.set(0, Math.PI/2, 0 );
	scene.add(phoneRig);

    // video
	video = document.getElementById( 'video' );
	video.play();
	videoTexture = new THREE.VideoTexture( video, function(video){
		video.wrapS = texture.wrapT = THREE.RepeatWrapping;
		video.offset.set( 0, 0 );
		video.repeat.set(2,2);
	});
	videoMat = new THREE.MeshLambertMaterial({ color:0xffffff, map: videoTexture});
	
	//

	clock = new THREE.Clock();

	renderer = new THREE.WebGLRenderer();
	renderer.setPixelRatio( window.devicePixelRatio );
  	container.appendChild( renderer.domElement );

	onWindowResize();
	window.addEventListener( 'resize', onWindowResize, false );

	// ScrollTrigger 
	
	gsap.registerPlugin(ScrollTrigger);
	let scene1 = gsap.timeline();
	let scenePhone = gsap.timeline();
	let sceneHero = gsap.timeline();
	let scenePhone2 = gsap.timeline();
	
	scene1
	.add('start')
	.to(camera.position, { z: -1.5})
	//.to(phoneBodyMat, { opacity: 1}, 'start')
	.to(phoneRig.rotation, { y: 0}, 'start')
	.to(phoneRig.position, { z: -8}, 'start')
	.add('middle')
	.to(phoneRig.rotation, { y: -0.2})
	.to('.headline', { opacity: 1}, 'middle');
	ScrollTrigger.create({
		animation: scene1,
		trigger: ".trigger-1",
		start: "top top",
		end : "bottom 30%",
		scrub: true
	});

	sceneHero
	.add('start')
	.to('.visual-1', { x: 400, opacity:0 })
	.to('.visual-3', { x: -350, opacity:0 }, 'start')
	.to('.visual-2', { x: -300, opacity:0 }, 'start');
	ScrollTrigger.create({
		animation: sceneHero,
		trigger: ".trigger-1",
		start: "top top",
		end : "40% 50%",
		scrub: true
	});

	scenePhone2
	.add('start')
	.to(phoneRig.position, { y: 8})
	.to('.headline', { top: '-100%'}, 'start');
	ScrollTrigger.create({
		animation: scenePhone2,
		trigger: ".trigger-2",
		start: "top top",
		end : "bottom -50%",
		scrub: true
	});
	
} // init end ================

function onWindowResize( event ) {
	renderer.setSize( window.innerWidth, window.innerHeight );
	
 
  	const windowWidth  = window.innerWidth;
    const windowHeight = window.innerHeight;
  
    camera.aspect = windowWidth / windowHeight;
    camera.updateProjectionMatrix();
}

function animate() {
    requestAnimationFrame( animate );
	var elapsed = clock.getElapsedTime();
	
    render();
};

function render() {
  
  renderer.render( scene, camera );
}

animate();

</script>	

	
		
	</body>
</html>
